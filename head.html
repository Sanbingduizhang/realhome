<div class='header'>
    <div class='header-left'>
        <ul>
            <li><a href="javascript:void(0);">古道人家</a></li>
            <li><a href="javascript:void(0);">古道人家</a></li>
            <li><a href="javascript:void(0);">古道人家</a></li>
            <li><a href="javascript:void(0);">古道人家</a></li>
            <li><a href="javascript:void(0);">古道人家</a></li>
            <li><a href="javascript:void(0);">人家</a></li>
        </ul>
    </div>
    <div class='header-right'>
        <div class="imghead" isClick="false">
            <img src="static/common/img/userhead.jpg" class="headimg">
        </div>
        <div class='head-img' title='头像名称'>
            <div class="head-mess head-mess-some">
                <ul>
                    <li><a href="javascript:void(0);">基本资料</a></li>
                    <li><a href="javascript:void(0);">文章信息</a></li>
                    <li><a href="javascript:void(0);">相册信息</a></li>
                    <li><a href="javascript:void(0);" class="loginOut">退出</a></li>
                </ul>
            </div>
            <div class="head-mess head-mess-sub">
                <ul>
                    <li><a href="javascript:void(0);" class="submit">登录</a></li>
                    <li><a href="javascript:void(0);" class="register">注册</a></li>
                </ul>
            </div>
        </div>

    </div>
</div>
<script>
    //头像下方显示内容的转换
    var realToken = getRealToken();
    if (realToken == undefined || realToken == '') {
        $(".imghead").attr("isClick", "false");
    } else {
        $(".imghead").attr("isClick", "true");
    }
    //头像下方显示内容和隐藏
    $(".imghead").mouseenter(function () {
        var isclick = $(".imghead").attr("isClick");
        if (isclick == 'false') {
            $(".head-mess-sub").show();
        } else {
            $(".head-mess-some").show();
        }
    });
    $(".header-right").mouseleave(function () {
        $(".head-mess").hide();
    });
    //注册和登录相关的事件以及跳转
    //注册
    $(".register").click(function () {
        window.open('regsub.html');
    });
    $(".submit").click(function () {
        $("#bgsub").show();
    });
    //登录事件
    $(".submitgo").click(function () {
        var user = $("#username").val();
        var pwd = $("#password").val();
        // 账号的正则验证
        var reguser = "^[a-zA-Z]{5,16}$";
        var reuser = new RegExp(reguser);
        if (!reuser.test(user)) {
            alert('账号由5-16位字母组成');
        }
        //密码的正则验证
        // var regepwd =
        //     "^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?![,\.#%'\+\*\-:;^_`]+$)[,\.#%'\+\*\-:;^_`0-9A-Za-z]{5,16}$";
        // var repwd = new RegExp(regepwd);
        // if (!repwd.test(pwd)) {
        //     alert("密码由5-16位字母、数字、符号组成");
        // }
        //发送登录请求
        $.ajax({
            type: "POST",
            url: getBaseUri() + "base/login",
            dataType: "json",
            data: {
                usercode: user,
                password: pwd,
            },
            success: function (data) {
                if (data.code == 1) {
                    $.cookie('real-home-token',data.data.token);
                    $("#top").load("head.html");
                    $("#bgsub").hide();
                } else {
                    alert(data.message);
                }
            },
            error: function (data) {
                console.log(data);
            }
        });
    });
    //退出事件
    $(".loginOut").click(function() {
        $.cookie('real-home-token','');
        $("#top").load("head.html");
        alert('退出成功');
    });
</script>